<html>
<head>
  <title>WiFi Keyboard</title>
  <script language="JavaScript">
    // format: /seq,code,press/5012,32,1/
    data = "&";
    seq = 12345;
    function key(code, down) {
      var letter;
      if (down) {
        letter = "1";
        } else {
        letter = "0";
      }
      data = data + seq + "," + code + "," + letter + "&";
      seq = seq + 1;
      if (data.length > 200) data = data.substring(data.length - 200, data.length);
      xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function() {
    	  if (xhr.readyState == 4)
    	  {
    	     // Received, OK
       	  el.appendChild(document.createTextNode("ok "));
    	  } else 
    	  {
    	    // Wait...
    	  }
      }
      xhr.open('GET', "/" + data, true);                  
      xhr.send(null);
      // var el = document.getElementById("keys");
      // el.appendChild(document.createTextNode(code + " "));
    }
    function up(e) {
      if (!e) e = window.event;
      var code;
      if ((e.charCode) && (e.keyCode==0)) {
        code = e.charCode
        } else {
        code = e.keyCode;
      }
      key(code, 0);
      return false;
    }
    function down(e) {
      if (!e) e = window.event;
      var code;
      if ((e.charCode) && (e.keyCode==0)) {
        code = e.charCode
        } else {
        code = e.keyCode;
      }
      key(code, 1);
      return false;
    }
    function focus_me() {
      document.getElementById("in").focus();
    }
</script></head>
<body id="myBody"
   onkeydown="return down(event);"
   onkeyup="return up(event);"
   onblur="key(1024,'D');" onfocus="focus_me();"onload="focus_me(); key(1024, 'D');">
  <h2>Android keyboard, type in text field and look at your android</h2>
  <input id="in" type="text" value="Type here to type on android">
  <h3>Tested on Chrome and Firefox. Special keys:</h3>
  <ul>
  <li>Ctrl = Ctrl</li>
  <li>Alt = Alt</li>
  <li>Arrows = DPAD Arrows</li>
  <li>Insert or F1 = DPAD Center</li>
  <li>F2 = Menu</li>
  <li>Escape = BACK</li>
  <li>F9, F10 = Volume control</li>
  </ul>
  <!-- <div id="keys">Debug: key presses:</div> -->
</body>
</html>
